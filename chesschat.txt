At http://chesschat.org/showpost.php?p=241948&postcount=38,
losboba said:
[QUOTE=losboba]
(b) another tournament where in the third round there was a group with 8 players expecting W, 7 expecting B and one, whose PTC was 'W', playing his first game.
This is the list of the sixteen players, with their preference, divided in S1/S2:

S1 = 076w 077b 087w 101w 103w 104b 105A 107b
S2 = 110b 116b 123w 125w 126b 130b 131w 132w

To my astonishment, SM considered 105 as expecting White and therefore put x=1. The pairing generated by SM was 76-110 123-77 87-116 101-125(!) 103-126 131-104 105-130 132-107.

I would have generated: 76-110 123-77 87-116 101-126 103-130 125-104 131-105 132-107. Anything wrong with that?
[/QUOTE]

Another easy way to generate the same mistaken behavior, and one that Games::Tournament::Swiss was guilty of, is to take a shortcut and calculate the number of players with one preference by subtracting the number with the other preference from the total number of players in the bracket.

If every player has a preference, no error is generated. But in the case above, if we calculate b as 7 and then assume w is 16-7, or 9, we conclude x=1.

The FIDE calculation actually allows the possibility of negative x.

[QUOTE=Rules]
A.8 Definition of "x"
The number of pairings which can be made in a score bracket, either
homogeneous or heterogeneous, not fulfilling all colour preferences,
is represented by the symbol x.
x can be calculated as follows:
w = number of players having a colour preference white.
b = number of players having a colour preference black.
q = number of players in the score bracket divided by 2, rounded
upwards.
If b >> w then x = b-q, else x = w-q.
[/QUOTE]

If there are 5 players in the bracket, and w=2, b=2 and q=3, ie, there is one late entry, then x=-1.

So, we have to 'round up' to zero.
